<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>ArmBOt</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&display=swap');
    :root{
      --bg:#01030a;
      --panel:#0b1220;
      --stroke:#1c2a44;
      --accent:#7fffe7;
      --accent-2:#8f6dff;
      --text:#eff6ff;
      --muted:#9eb4d8;
      --glow:rgba(127,255,231,.35);
    }
    *{box-sizing:border-box;}
    body{
      font-family:'Space Grotesk',system-ui,sans-serif;
      margin:0;
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      padding:32px 12px 36px;
      background:
        radial-gradient(circle at 20% 20%,rgba(125,255,255,.18),transparent 45%),
        radial-gradient(circle at 80% 0%,rgba(143,109,255,.25),transparent 50%),
        var(--bg);
      color:var(--text);
    }
    body::before,
    body::after{
      content:"";
      position:fixed;
      width:360px;
      height:360px;
      border-radius:50%;
      background:radial-gradient(circle,var(--glow),transparent 65%);
      filter:blur(40px);
      opacity:.55;
      z-index:-1;
    }
    body::before{top:-120px;left:-80px;}
    body::after{bottom:-140px;right:-60px;background:radial-gradient(circle,rgba(143,109,255,.3),transparent 70%);}
    .container{
      width:100%;
      max-width:760px;
      background:rgba(5,10,22,.75);
      border:1px solid rgba(255,255,255,.05);
      border-radius:24px;
      padding:24px 26px 30px;
      box-shadow:0 25px 55px rgba(0,0,0,.65),0 0 50px rgba(119,167,255,.18);
      backdrop-filter:blur(18px);
    }
    h3{
      text-transform:uppercase;
      letter-spacing:.12em;
      font-size:1.4rem;
      text-align:center;
      margin:0 0 20px;
    }
    .row{
      display:flex;
      gap:16px;
      align-items:center;
      margin:16px 0;
      padding:18px;
      border-radius:20px;
      border:1px solid var(--stroke);
      background:linear-gradient(150deg,rgba(12,22,45,.9),rgba(5,8,18,.85));
      box-shadow:0 20px 40px rgba(0,0,0,.5);
      position:relative;
      overflow:hidden;
    }
    .row::after{
      content:"AI render";
      position:absolute;
      top:14px;
      right:18px;
      font-size:10px;
      letter-spacing:.3em;
      text-transform:uppercase;
      color:rgba(255,255,255,.6);
    }
    .row:nth-of-type(1){
      background-image:url('https://image.pollinations.ai/prompt/realistic%20robotic%20arm%20precision%20blue%20light');
      background-size:cover;
      background-position:center;
    }
    .row:nth-of-type(2){
      background-image:url('https://image.pollinations.ai/prompt/ultra%20realistic%20robotic%20arm%20lab%20purple%20glow');
      background-size:cover;
      background-position:center;
    }
    .row:nth-of-type(3){
      background-image:url('https://image.pollinations.ai/prompt/photorealistic%20robotic%20arm%20factory%20gold%20light');
      background-size:cover;
      background-position:center;
    }
    .row > *{
      position:relative;
      z-index:1;
    }
    .slider-box{
      flex:1;
      display:flex;
      flex-direction:column;
      gap:8px;
      padding:12px 14px;
      border-radius:16px;
      background:rgba(6,10,22,.75);
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 15px 35px rgba(0,0,0,.45);
    }
    input[type="range"]{
      width:100%;
      appearance:none;
      -webkit-appearance:none;
      height:6px;
      border-radius:999px;
      background:rgba(255,255,255,.3);
      outline:none;
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none;
      width:24px;
      height:24px;
      border-radius:50%;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      border:2px solid rgba(255,255,255,.6);
      box-shadow:0 14px 25px rgba(0,0,0,.45),0 0 15px rgba(143,109,255,.6);
      cursor:pointer;
    }
    input[type="range"]::-moz-range-thumb{
      width:24px;
      height:24px;
      border-radius:50%;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      border:none;
      box-shadow:0 14px 25px rgba(0,0,0,.45),0 0 15px rgba(143,109,255,.6);
      cursor:pointer;
    }
    .label{
      width:130px;
      text-align:center;
      font-weight:600;
      font-size:1rem;
      letter-spacing:.12em;
      text-transform:uppercase;
      padding:14px 10px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(5,8,18,.75);
      box-shadow:0 10px 25px rgba(0,0,0,.45);
    }
    button{
      padding:10px 22px;
      margin:6px;
      border-radius:999px;
      border:1px solid transparent;
      font-weight:600;
      letter-spacing:.04em;
      cursor:pointer;
      transition:transform .15s ease,box-shadow .15s ease;
      background:linear-gradient(120deg,var(--accent),var(--accent-2));
      color:#04101c;
      box-shadow:0 16px 30px rgba(0,0,0,.45),0 0 30px rgba(127,255,231,.35);
    }
    button:hover{transform:translateY(-2px);}
    button:active{transform:translateY(1px) scale(.98);}
    .small{
      font-size:.85rem;
      color:var(--muted);
      text-align:center;
      letter-spacing:.08em;
    }
    #status{
      text-transform:uppercase;
      letter-spacing:.18em;
      margin-top:12px;
    }
    @media(max-width:640px){
      .container{padding:20px;}
      .row{flex-direction:column;align-items:flex-start;gap:12px;}
      .label{width:100%;}
      .slider-box{width:100%;}
    }
  </style>
</head>
<body>
  <div class="container">
    <h3>3-Axis ArmBot Controller</h3>

    <div class="row">
      <div class="label">Servo 1</div>
      <div class="slider-box">
        <input id="s1" type="range" min="0" max="180" value="90">
        <div class="small">Angle: <span id="a1">90</span>°</div>
      </div>
    </div>

    <div class="row">
      <div class="label">Servo 2</div>
      <div class="slider-box">
        <input id="s2" type="range" min="0" max="180" value="90">
        <div class="small">Angle: <span id="a2">90</span>°</div>
      </div>
    </div>

    <div class="row">
      <div class="label">Servo 3</div>
      <div class="slider-box">
        <input id="s3" type="range" min="0" max="180" value="90">
        <div class="small">Angle: <span id="a3">90</span>°</div>
      </div>
    </div>

    <div style="text-align:center;margin-top:12px;">
      <button id="connectBtn">Connect Serial</button>
      <button id="sendBtn">Send Angles</button>
      <button id="centerBtn">Center (90)</button>
    </div>

    <div class="small" id="status" style="margin-top:10px;">Status: Not connected</div>
  </div>

<script>
let port = null;
let writer = null;
const enc = new TextEncoder();

function status(text){ document.getElementById('status').innerText = "Status: " + text; }

async function connectSerial(){
  try{
    port = await navigator.serial.requestPort();
    await port.open({ baudRate: 115200 });
    writer = port.writable.getWriter();
    status("Connected");
  }catch(e){
    status("Serial connection failed");
  }
}

async function sendLine(line){
  if(!writer) { status("Not connected"); return; }
  try {
    await writer.write(enc.encode(line));
  } catch(e) {
    status("Write failed");
  }
}

function sendAngles(){
  const a1 = document.getElementById('s1').value;
  const a2 = document.getElementById('s2').value;
  const a3 = document.getElementById('s3').value;
  const line = `j,${a1},${a2},${a3}\n`;
  sendLine(line);
}

document.getElementById('connectBtn').addEventListener('click', async ()=> {
  if (!('serial' in navigator)) { status("Web Serial not supported"); return; }
  if (!port) await connectSerial();
});

document.getElementById('sendBtn').addEventListener('click', ()=> sendAngles());

document.getElementById('centerBtn').addEventListener('click', ()=> {
  document.getElementById('s1').value = 90;
  document.getElementById('s2').value = 90;
  document.getElementById('s3').value = 90;
  updateDisplays();
  sendAngles();
});

function updateDisplays(){
  document.getElementById('a1').innerText = document.getElementById('s1').value;
  document.getElementById('a2').innerText = document.getElementById('s2').value;
  document.getElementById('a3').innerText = document.getElementById('s3').value;
}

// send immediately when slider is changed (keeps angle fixed when you stop)
['s1','s2','s3'].forEach(id => {
  const el = document.getElementById(id);
  el.addEventListener('input', ()=> {
    updateDisplays();
    // send on input for instant response; comment out if you prefer manual send
    sendAngles();
  });
});

// initialize displays
updateDisplays();
</script>
</body>
</html>
